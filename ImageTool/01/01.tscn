[gd_scene load_steps=5 format=2]

[ext_resource path="res://ImageTool/01/01_2_素材.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]
script/source = "extends Control



onready var texture_rect = $TextureRect
onready var viewport = $Viewport
onready var texture_rect_1 = $Viewport/TextureRect
onready var texture_rect_2 = $Viewport/TextureRect2




func _ready():
	yield(get_tree().create_timer(1.0), \"timeout\")
	#yield(VisualServer, \"frame_post_draw\")
	#yield(get_tree(), \"idle_frame\")
	
	var view_tex = viewport.get_texture()
	texture_rect.texture = view_tex
	
	
	var img = view_tex.get_data()
	img.save_png(\"C:/Users/yanyan/Desktop/EffectsLibrary/ImageTool/01/01.png\")
	
	
func _input(event):
	if event.is_action_pressed(\"image_tool_01\"):#Q
		var view_tex = viewport.get_texture()
		var img = view_tex.get_data()
		img.flip_y()
		img.flip_x()
		var img_tex = ImageTexture.new()
		img_tex.create_from_image(img)
		texture_rect_1.texture = img_tex
		texture_rect_2.texture = img_tex
		print(\"q\")
"

[sub_resource type="Shader" id=2]
code = "shader_type canvas_item;
render_mode blend_premul_alpha,unshaded;

void fragment(){
	vec4 tex_color = texture(TEXTURE,UV);
	COLOR = tex_color;
	COLOR.a = 0.0;
}"

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 2 )

[node name="Control" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
script = SubResource( 1 )

[node name="Viewport" type="Viewport" parent="."]
size = Vector2( 512, 512 )
transparent_bg = true
hdr = false
usage = 0
render_target_v_flip = true
render_target_update_mode = 3

[node name="TextureRect" type="TextureRect" parent="Viewport"]
material = SubResource( 3 )
margin_right = 40.0
margin_bottom = 40.0
texture = ExtResource( 1 )

[node name="TextureRect2" type="TextureRect" parent="Viewport"]
margin_right = 40.0
margin_bottom = 40.0
texture = ExtResource( 1 )

[node name="TextureRect" type="TextureRect" parent="."]
margin_right = 622.0
margin_bottom = 546.0
